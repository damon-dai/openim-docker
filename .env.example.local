# OpenIM 本地开发配置示例
# 复制此文件为 .env 并根据需要修改

# ============================================
# 本地开发镜像配置
# ============================================

# 使用本地构建的 openim-server 镜像
OPENIM_SERVER_IMAGE=openim/openim-server:local-dev

# 或者使用带日期的版本标签
# OPENIM_SERVER_IMAGE=openim/openim-server:dev-20231209

# 或者使用功能分支标签
# OPENIM_SERVER_IMAGE=openim/openim-server:feature-new-api

# ============================================
# 官方镜像配置（用于回滚）
# ============================================

# 官方稳定版本
# OPENIM_SERVER_IMAGE=openim/openim-server:v3.8.3-patch.9

# ============================================
# Chat 服务镜像（如果也需要本地构建）
# ============================================

# 使用本地构建的 openim-chat 镜像
# OPENIM_CHAT_IMAGE=openim/openim-chat:local-dev

# 官方版本
OPENIM_CHAT_IMAGE=openim/openim-chat:v1.8.4-patch.2

# ============================================
# 其他配置保持不变
# ============================================

# Docker images
MONGO_IMAGE=mongo:7.0
REDIS_IMAGE=redis:7.0.0
KAFKA_IMAGE=bitnamilegacy/kafka:3.5.1
MINIO_IMAGE=minio/minio:RELEASE.2024-01-11T07-46-16Z
PROMETHEUS_IMAGE=prom/prometheus:v2.51.2
ALERTMANAGER_IMAGE=prom/alertmanager:v0.27.0
GRAFANA_IMAGE=grafana/grafana:11.0.1
ETCD_IMAGE=bitnamilegacy/etcd:3.5.13

OPENIM_WEB_FRONT_IMAGE=openim/openim-web-front:release-v3.8.3
OPENIM_ADMIN_FRONT_IMAGE=openim/openim-admin-front:release-v1.8.4

NODE_EXPORTER_IMAGE=prom/node-exporter:v1.7.0

# Directory for data storage
DATA_DIR=./

# MongoDB configuration
MONGO_ADDRESS="mongo:27017"
MONGO_USERNAME=openIM
MONGO_PASSWORD=openIM123

# Kafka configuration
KAFKA_ADDRESS="kafka:9094"

# Etcd configuration
ETCD_ADDRESS="etcd:2379"

# Redis configuration
REDIS_ADDRESS="redis:6379"
REDIS_PASSWORD=openIM123

# MinIO configuration
MINIO_EXTERNAL_ADDRESS="http://127.0.0.1:10005"
MINIO_INTERNAL_ADDRESS="minio:9000"
MINIO_ACCESS_KEY_ID=root
MINIO_SECRET_ACCESS_KEY=openIM123
MINIO_PORT=10005
MINIO_CONSOLE_PORT=10004

# OpenIM configuration
OPENIM_SECRET=openIM123
OPENIM_API_PORT=10002
OPENIM_MSG_GATEWAY_PORT=10001

# Ports for chat API and admin API
CHAT_API_PORT=10008
ADMIN_API_PORT=10009

# Ports for OpenIM web and admin frontends
OPENIM_WEB_FRONT_PORT=11001
OPENIM_ADMIN_FRONT_PORT=11002

# Monitoring ports
PROMETHEUS_PORT=19090
ALERTMANAGER_PORT=19093
GRAFANA_PORT=13000
NODE_EXPORTER_PORT=19100

# General settings
API_URL="http://openim-server:10002"
LOG_IS_STDOUT=true
LOG_LEVEL=3

GRAFANA_URL="http://127.0.0.1:13000/"

# Kafka and Etcd authentication - comment out to disable auth
# KAFKA_USERNAME=admin
# KAFKA_PASSWORD=123456
# ETCD_USERNAME=root
# ETCD_PASSWORD=123456
